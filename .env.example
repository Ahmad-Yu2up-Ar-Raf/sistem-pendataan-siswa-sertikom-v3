# ============================================================================
# Laravel Production Environment Template (DATABASE ONLY - NO REDIS)
# Copy this to Dockploy Environment Variables (DO NOT commit .env)
# ============================================================================

# === APPLICATION ===
APP_NAME=CatatSiswa
APP_ENV=production
APP_KEY=                              # Generate: php artisan key:generate --show
APP_DEBUG=false
APP_URL=https://your-domain.com       # Update with actual domain
APP_LOCALE=id
APP_FALLBACK_LOCALE=en

# === LOGGING ===
LOG_CHANNEL=daily
LOG_LEVEL=warning
LOG_DEPRECATIONS_CHANNEL=null

# === DATABASE ===
# Option 1: Using DATABASE_URL (Recommended for cloud platforms)
DATABASE_URL=postgresql://username:password@db-host:5432/database?sslmode=prefer

# Option 2: Individual variables (if DATABASE_URL not supported)
DB_CONNECTION=pgsql
DB_HOST=your-postgres-service-name    # Dockploy service name
DB_PORT=5432
DB_DATABASE=app
DB_USERNAME=appuser
DB_PASSWORD=                          # Set as SECRET in Dockploy

# === CACHE (Using Database) ===
CACHE_DRIVER=database
CACHE_PREFIX=catatsiswa_prod
CACHE_STORE=database

# === SESSION (Using Database) ===
SESSION_DRIVER=database
SESSION_LIFETIME=120
SESSION_ENCRYPT=false
SESSION_PATH=/
SESSION_DOMAIN=                       # Set to your domain (e.g., .yourdomain.com)
SESSION_SECURE_COOKIE=true            # true for HTTPS
SESSION_SAME_SITE=lax                 # lax, strict, or none
SESSION_HTTP_ONLY=true

# === QUEUE (Using Database) ===
QUEUE_CONNECTION=database
QUEUE_FAILED_DRIVER=database

# === BROADCASTING ===
BROADCAST_CONNECTION=log
BROADCAST_DRIVER=log

# === FILESYSTEM ===
FILESYSTEM_DISK=local                 # local, s3, or public

# AWS S3 (if using S3 for storage)
AWS_ACCESS_KEY_ID=                    # Set as SECRET
AWS_SECRET_ACCESS_KEY=                # Set as SECRET
AWS_DEFAULT_REGION=us-east-1
AWS_BUCKET=your-bucket-name
AWS_USE_PATH_STYLE_ENDPOINT=false
AWS_ENDPOINT=
AWS_URL=

# === MAIL ===
MAIL_MAILER=smtp                      # smtp, ses, mailgun, postmark, log
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_USERNAME=                        # Set as SECRET
MAIL_PASSWORD=                        # Set as SECRET (App Password for Gmail)
MAIL_ENCRYPTION=tls                   # tls or ssl
MAIL_FROM_ADDRESS=noreply@yourdomain.com
MAIL_FROM_NAME="${APP_NAME}"

# === OCTANE (FrankenPHP) ===
OCTANE_SERVER=frankenphp
OCTANE_HTTPS=false                    # true if SSL termination at Octane level
OCTANE_WORKERS=auto                   # auto, or specific number (2, 4, 8, etc)
OCTANE_MAX_REQUESTS=500
OCTANE_WATCH=false                    # false in production

# === FRANKENPHP ===
PORT=8000                             # Main application port
ADMIN_PORT=2019                       # FrankenPHP admin API port

# === TRUSTED PROXIES ===
# Set to your load balancer/Traefik IP range
TRUSTED_PROXIES=*                     # Or specific: 172.18.0.0/16,10.0.0.0/8
TRUSTED_HOSTS=^(.+\.)?yourdomain\.com$

# === SECURITY ===
BCRYPT_ROUNDS=12

# === VITE (Frontend) ===
VITE_APP_NAME="${APP_NAME}"
VITE_API_URL="${APP_URL}/api"

# === DEPLOYMENT CONTROLS ===
RUN_MIGRATIONS=false                  # Set true on first deploy only
ENABLE_QUEUE_WORKER=true              # Enable queue workers via supervisor

# === OPTIONAL: Error Tracking (Sentry, Flare, etc) ===
# SENTRY_LARAVEL_DSN=                 # Set as SECRET
# FLARE_KEY=                          # Set as SECRET

# === OPTIONAL: Third-party Services ===
# POSTMARK_TOKEN=                     # Set as SECRET
# RESEND_API_KEY=                     # Set as SECRET
# SLACK_BOT_USER_OAUTH_TOKEN=         # Set as SECRET
